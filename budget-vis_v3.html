<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syracuse Budget Cuts Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        /* Global Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            padding: 0;
            margin: 0;
            color: #333;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #014d84;
            text-align: center;
        }
        
        h2 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            color: #014d84;
        }
        
        .chart-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 30px;
            position: relative;
        }
        
        .chart-explanation {
            padding: 15px;
            background-color: #f1f7fd;
            border-left: 4px solid #014d84;
            margin: 20px 0;
        }

        .chart-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            text-align: center;
            font-weight: bold;
        }
        
        .tooltip {
            position: absolute;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            border-radius: 5px;
            pointer-events: none;
            font-size: 0.85rem;
            z-index: 10;
            max-width: 300px;
        }
        
        .bar {
            cursor: pointer;
            transition: opacity 0.3s;
        }
        
        .bar:hover {
            opacity: 0.8;
        }
        
        .axis text {
            font-size: 10px;
        }
        
        .axis path, .axis line {
            fill: none;
            stroke: #ccc;
            shape-rendering: crispEdges;
        }
        
        .grid line {
            stroke: #ddd;
            stroke-opacity: 0.3;
            shape-rendering: crispEdges;
        }

        .legend {
            font-size: 12px;
        }
        
        .total-cut {
            font-weight: bold;
            font-size: 1.2rem;
            color: #d32f2f;
            text-align: center;
            margin: 1rem 0;
        }
        
        /* New styles for summary metrics */
        .summary-metrics {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        .metric-card {
            flex: 1 1 200px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 15px;
            margin: 10px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #014d84;
            margin: 10px 0;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .negative {
            color: #d32f2f;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .button-group {
            display: flex;
            margin: 0 10px;
        }
        
        .control-button {
            background-color: #f1f7fd;
            border: 1px solid #014d84;
            padding: 8px 12px;
            margin: 0;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        
        .control-button:first-child {
            border-radius: 4px 0 0 4px;
        }
        
        .control-button:last-child {
            border-radius: 0 4px 4px 0;
        }
        
        .control-button.active {
            background-color: #014d84;
            color: white;
        }
        
        /* Loading animation */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #014d84;
            width: 40px;
            height: 40px;
            margin: 0 auto 15px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Print button */
        .print-button {
            display: block;
            background-color: #014d84;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 15px;
            margin: 20px auto;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .print-button:hover {
            background-color: #023a63;
        }
        
        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            h2 {
                font-size: 1.2rem;
            }
            
            .chart-container {
                padding: 10px;
            }
            
            .chart-title {
                font-size: 1rem;
            }
            
            .summary-metrics {
                flex-direction: column;
            }
            
            .metric-card {
                margin: 5px 0;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .button-group {
                margin: 5px 0;
            }
        }
        
        @media print {
            .chart-container {
                break-inside: avoid;
                page-break-inside: avoid;
                margin-bottom: 20px;
                box-shadow: none;
                border: 1px solid #eee;
            }
            
            .controls, .print-button {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Syracuse Budget Cuts 2025</h1>
        <p class="total-cut" id="total-cut"></p>
        
        <!-- Summary metrics -->
        <div class="summary-metrics" id="summary-metrics"></div>
        
        <!-- Chart controls -->
        <div class="controls">
            <div class="button-group">
                <button class="control-button active" data-view="all">All Data</button>
                <button class="control-button" data-view="public-safety">Public Safety</button>
                <button class="control-button" data-view="services">Essential Services</button>
            </div>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Departments with Largest Budget Cuts</div>
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading chart...</p>
            </div>
            <div id="largest-cuts-chart"></div>
        </div>
        
        <div class="chart-explanation">
            <p>The chart above highlights the departments facing the most significant budget cuts in absolute dollar amounts. Public safety departments like Police and Fire face major cuts, while the Bureau of Information Technology and Assessment Department are seeing drastic reductions that will impact city operations and services.</p>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Departments with Highest Percentage Cuts</div>
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading chart...</p>
            </div>
            <div id="percentage-cuts-chart"></div>
        </div>
        
        <div class="chart-explanation">
            <p>This visualization reveals the severity of budget cuts by percentage. The complete elimination of the Housing Trust fund is particularly alarming as it directly impacts affordable housing initiatives. The Assessment Department faces a staggering 52% reduction, severely limiting its ability to maintain accurate property assessments across the city.</p>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Impact on Public Safety Budgets</div>
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading chart...</p>
            </div>
            <div id="public-safety-chart"></div>
        </div>
        
        <div class="chart-explanation">
            <p>Public safety departments are facing substantial cuts that will directly impact emergency services. The Fire Department is losing over $2.3 million, affecting equipment maintenance, emergency supplies, and potentially response times. The Police Department faces nearly $3.5 million in cuts across sworn and civilian divisions, which will reduce community policing capabilities and public safety initiatives.</p>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Critical Services Facing Cuts</div>
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading chart...</p>
            </div>
            <div id="services-chart"></div>
        </div>
        
        <div class="chart-explanation">
            <p>Essential city services are bearing the brunt of these budget cuts. Transportation, Waste Management, and Parks & Recreation programs will all see reduced service levels. These cuts will be felt directly by residents through less frequent waste collection, deteriorating road conditions, and fewer recreational opportunities for youth and families.</p>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Changes in Revenue Sources</div>
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading chart...</p>
            </div>
            <div id="revenue-chart"></div>
        </div>
        
        <div class="chart-explanation">
            <p>The city is dramatically reducing its use of fund balance (savings) by $12.8 million, while also decreasing property tax revenue. This combination of spending cuts and lower revenue raises serious questions about the sustainability of city services and Syracuse's long-term fiscal health.</p>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Cuts by Department Category</div>
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading chart...</p>
            </div>
            <div id="department-category-chart"></div>
        </div>
        
        <div class="chart-explanation">
            <p>This chart categorizes cuts by department type, revealing that public safety and infrastructure bear the brunt of the reductions. When essential services like these face significant cuts, it directly impacts residents' quality of life and safety. This approach to budgeting puts critical city functions at risk while providing minimal relief to taxpayers.</p>
        </div>
        
        <div class="chart-container">
            <div class="chart-title">Budget Size vs. Cut Percentage</div>
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading chart...</p>
            </div>
            <div id="budget-vs-cut-chart"></div>
        </div>
        
        <div class="chart-explanation">
            <p>This visualization reveals a troubling pattern in the budget cuts. Many smaller departments are facing disproportionately larger percentage cuts, which can completely cripple their operations. Meanwhile, some larger departments with more political influence maintain their funding levels. This inequitable approach to budget cuts threatens to undermine essential but less visible city services.</p>
        </div>
        
        <button class="print-button" id="print-button">Print/Save as PDF</button>
    </div>

    <script>
        // Parse currency strings to numbers
        function parseCurrency(currencyStr) {
            if (!currencyStr || typeof currencyStr !== 'string') return 0;
            return parseFloat(currencyStr.replace(/[$,]/g, '')) || 0;
        }

        // Format number as currency
        function formatCurrency(num) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(num);
        }

        // Format percentage
        function formatPercent(num) {
            return new Intl.NumberFormat('en-US', {
                style: 'percent',
                minimumFractionDigits: 1,
                maximumFractionDigits: 1
            }).format(num / 100);
        }

        // Create tooltip div
        const tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);
        
        // Define department categories for grouping
        const departmentCategories = {
            "Police Department": "Public Safety",
            "Fire Department": "Public Safety",
            "Department of Public Works": "Infrastructure",
            "Parks, Recreation & Youth Programs": "Community Services",
            "Neighborhood & Business Development": "Community Development",
            "Executive": "Administration",
            "Finance": "Administration",
            "Assessment": "Administration",
            "Department of Law": "Administration",
            "Engineering": "Infrastructure",
            "Common Council": "Governance",
            "Citizen Review Board": "Governance",
            "Audit": "Administration",
            "City Clerk": "Administration",
            "Board of Zoning Appeals": "Community Development",
            "Special Objects of Expense": "Other",
            "Revenue Changes": "Revenue",
            "Syracuse School City District": "Education"
        };

        // Remove loading indicators when chart loads
        function removeLoading(chartId) {
            const chartContainer = d3.select(`#${chartId}`).node().closest('.chart-container');
            d3.select(chartContainer).select('.loading').style('display', 'none');
        }

        // Load and process the data as direct JSON
        // Using the CSV data provided by the user
        const csvData = `Department_Broad,Department_Specific,Proposed_Budget,Account_Amend_1,Amt_Changed_1,Account_Ammend_2,Amt_Changed_2,Account_Ammend_3,Amt_Changed_3,Account_Ammend_4,Amt_Changed_4,Account_Ammend_5,Amt_Changed_5,Account_Amend_6,Amt_Changed_6,Account_Ammend_7,Amt_Changed_7,Account_Ammend_8,Amt_Changed_8,Account_Ammend_9,Amt_Changed_9,Account_Ammend_10,Amt_Changed_10,Amended_Budget,Difference,Change
Common Council,Common Council,"$801,988","10100 “Professional Services"" Account — 541500","-$56,140",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$745,848","-$56,140",-7.00%
Citizen Review Board,Citizen Review Board,"$414,844","10500 ""Professional Services"" Account — 541500","-$29,040",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$385,804","-$29,040",-7.00%
Executive,Office of the Mayor,"$1,055,244","12100 ""Contracted Services-Related Parties"" Account — 541700","-$73,866",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$981,378","-$73,866",-7.00%
Executive,Office of Gun Violence Prevention,"$395,540","12150 ""Professional Services"" Account — 541500","-$150,000",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$245,540","-$150,000",-37.92%
Executive,Office of Comunications,"$394,200","12120 ""Consumable Supplies & Materials"" Account — 540541","-$2,000","12120 “Technical Devices & Tools"" Account — 540542","-$6,200","12120 “Other Services"" Account — 540552","-$19,394",,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$366,606","-$27,594",-7.00%
Executive,"Office of Accountability, Performance & Innovation (API)","$4,281,745","12140 ""Factual & Informational” Account — 540530","-$649,723",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$3,632,022","-$649,723",-15.17%
Executive,Office of Management & Budget,"$523,182","13400 ""Salaries"" Account — 510100","-$25,923",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$497,259","-$25,923",-4.95%
Executive,Division of Purchase,"$130,278","13450 ""Office Supplies"" Account — 540320",-$500,"13450 ""Travel"" Account — 541610",-$500,"13450 ""Training"" Account — 541620",-$700,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$128,578","-$1,700",-1.30%
Executive,Division of Equity Compliance & Social Impact,"$200,852","64500 ""Office Supplies"" Account — 540320","-$1,000","64500 ""Travel"" Account — 541610","-$3,000","64500 ""Training"" Account — 541620","-$4,000","64500 ""Professional Development"" Account — 541630                                                                                                                                            ","-$1,000",,$0,,$0,,$0,,$0,,$0,,$0,"$191,852","-$9,000",-4.48%
Executive,Office of Personnel & Labor Relations,"$1,398,236","14300 ""Salaries"" Account — 510100","-$97,877",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$1,300,359","-$97,877",-7.00%
Executive,Bureau of Research,"$346,516","14800 ""Travel"" Account — 541610","-$4,185",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$342,331","-$4,185",-2.08%
Executive,Bureau of Information Technology,"$2,430,163","16800 ""Salaries"" Account — 510100","-$170,112","16800 ""Other Services"" Account — 540552","-$250,000","16800 ""Professional Services"" Account — 541500","-$250,000",,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$1,760,051","-$670,112",-27.57%
Finance,Bureau of Accounts,"$902,714","13110 ""Salaries"" Account — 510100","-$63,190",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$839,524","-$63,190",-31.46%
Finance,Parking Violatons Bureau,"$1,066,447","13310 ""Salaries"" Account — 510100","-$74,652",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$991,795","-$74,652",-7.00%
Audit,Office of the City Auditor,"$348,866","13200 ""Professional Services"" Account — 541500","-$24,421",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$324,445","-$24,421",-12.16%
City Clerk,City Clerk's Office,"$408,472",14100 Professional Services Account — 541500,"-$15,000",,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$393,472","-$15,000",-3.67%
Assessment,Department of Assessment,"$1,918,192","13550 ""Professional Services"" Account — 541500","-$1,000,000",,$0,,0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$918,192","-$1,000,000",-52.13%
Assessment,Board of Assessment Review,"$20,200","13560 ""Salaries"" Account — 510100","-$1,414",,$0,,0,,$0,,$0,,$0,,$0,,$0,,$0,,$0,"$18,786","-$1,414",-7.00%
Board of Zoning Appeals,Board of Zoning Appeal,"$9,500","80100 “Temporary Services-P/T"" Account — 510300",-$655,,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$8,845",-$655,-6.89%
Department of Law,Law Department,"$5,272,377","14200 ""Professional Services"" Account — 541500","-$869,067",,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$4,403,310","-$869,067",-16.48%
Department of Law,Bureau of Administrative Adjudication,"$966,533","13320 “Temporary Services-P/T"" Account — 510300","-$67,658",,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$898,875","-$67,658",-7.00%
Neighborhood & Business Development,Neighborhood & Business Development,1389055,"64200 ""Contracted Services-Related Parties"" Account — 541700","-$97,234",,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$1,291,821","-$97,234",-7.00%
Neighborhood & Business Development,Division of Code Enforcement,6385952,"36210 ""Professional Services"" Account — 541500",-250000,"36210 ""Contracted Services-Related Parties"" Account — 541700",-210000,36210 Salaries Account — 510100,-120000,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$5,805,952","-$580,000",-9.08%
Neighborhood & Business Development,Division of Planning & Sustainability,417998,"64210 ""Professional Services"" Account — 541500",-29260,,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$388,738","-$29,260",-7.00%
Engineering,Department of Engineering,1575842,"80400 ""Salaries"" Account — 510100",-110309,,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$1,465,533","-$110,309",-7.00%
Department of Public Works,DPW Environmental Services,1319805,"14910 “Overtine Wages"" Account — 510400",-43537,"14910 ""Temporary Services-P/T"" Account — 510300",-49000,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$1,227,268","-$92,537",-7.01%
Department of Public Works,DPW Building Services,4357453,16210 Wages- F/T Weekly Account — 510200,-305022,16210 Wages- F/T Weekly Account — 510200,-305022,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$3,747,409","-$610,044",-14.00%
Department of Public Works,DPW Street Repair,"1,412,569","51200 ""Salaries"" Account — 510100",-98880,,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$1,313,689","-$98,880",-7.00%
Department of Public Works,DPW Motor Equipment Maintenance,"7,444,970","51320 ""Fuels"" Account — 540110",-521148,"51320 ""Automotive Repairs"" Account — 540210",-500000,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$6,423,822","-$1,021,148",-13.72%
Department of Public Works,DPW Snow & Ice Control,"4,629,877","51420 “Consumable Supplies & Materials"" Account — 540541",-324092,,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$4,305,785","-$324,092",-7.00%
Department of Public Works,"DPW Waste Collection, Recycling & Disposal","8,583,907","81600 “Other Services"" Account — 540552","-600,874",,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$7,983,033","-$600,874",-7.00%
Department of Public Works,DPW Street Cleaning,"1,643,949","81700 ""Manual Services"" Account — 540551",-70000,"81700 ""Other Services"" Account ~ 540552",-45077,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$1,528,872","-$115,077",-7.00%
Department of Public Works,DPW Transportation,"9,152,687","81800 ""Professional Services"" Account — 541500","-1,140,689",,0,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$8,011,998","-$1,140,689",-12.46%
Police Department,Police Field Services - Sworn,"57,697,300","31230 ""Factual & Informational” Account — 540530",-1000000,"31230 ""Overtime Wages"" Account — 510400",-1000000,"31230 “Professional Services"" Account — 541500",-884865,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$54,812,435","-$2,884,865",-5.00%
Police Department,Police Field Services - Civilian,"8,075,863","31231 ""Temporary Services-P/T"" Account — 510300","-415,000","31231 ""Salaries” Account — 510100",-239000,,0,,0,,$0,,$0,,$0,,$0,,$0,,$0,"$7,421,863","-$654,000",-8.10%
Fire Department,Fire Main - Sworn,"47,628,834","34100 ""Overtime Wages"" Account -— 510400",-1000000,"34100 ""Other Services"" Account — 540552",-136000,"34100 “Manual Services"" Account — 540551",-4000,"34100 ""Consumable Supplies & Materials"" Account — 540541",-50000,"34100 ""Factual & informational"" Account — 540530",-25000,"34100 ""Facility Repair” Account — 540511","-$225,000","34100 ""Technical Devices & Tools"" Account — 540542","-$300,000","34100 ""Emergency, Medical & Safety Supplies"" Account — 540520","-$260,000","34100 ""Professional Services"" Account — 541500","-$330,000","34100 ""Motor Equipment Repair Supplies"" Account — 540220","-$42,500","$45,256,334","-$2,372,500",-4.98%
Fire Department,Fire Main - Civilian,"1,337,059","34101 ""Salaries"" Account — 510100",-67000,,0,,0,,0,,0,,0,,0,,0,,0,,0,"$1,270,059","-$67,000",-5.01%
"Parks, Recreation & Youth Programs",Parks Administration,"837,816","70200 ""Salaries"" Account — 510100","-58,648",,0,,0,,0,,0,,0,,0,,0,,0,,0,"$779,168","-$58,648",-7.00%
"Parks, Recreation & Youth Programs",Parks Grounds Maintenance,"6,903,824","71100 ""Contracted Services-Related Parties"" Account — 541700",-74360,"71100 ""Manual Services"" Account — 540551",-408640,,0,,0,,0,,0,,0,,0,,0,,0,"$6,420,824","-$483,000",-7.00%
"Parks, Recreation & Youth Programs",Parks Recreation,"4,813,911","71400 ""Salaries"" Account — 510100",-165000,"71400 ""Temporary Services-P/T"" Account — 510300,",-165000,,0,,0,,0,,0,,0,,0,,0,,0,"$4,483,911","-$330,000",-6.86%
"Parks, Recreation & Youth Programs",Dog Control Division,530912,35100 “Salaries” Account — 510100,"-37,164",,0,,0,,0,,0,,0,,0,,0,,0,,0,"$493,748","-$37,164",-7.00%
Special Objects of Expense,Special Objects of Expense,1000000,"90000 — ""Housing Trust"" Account — 593007",-1000000,,0,,0,,0,,0,,0,,0,,0,,0,,0,$0,"-$1,000,000",-100.00%
Special Objects of Expense,Special Objects of Expense,250000,"90000 — “Home HeadQuarters"" Account — 595946",1000000,,0,,0,,0,,0,,0,,0,,0,,0,,0,"$1,250,000","$1,000,000",400.00%
Revenue Changes,Water Fund Revenue,"28,625,846",“Surpluses and Balances - Fund Balance”,"520,000",“Sale of Water’ Account - 421400,-520000,,0,,0,,0,,0,,0,,0,,0,,0,"$28,625,846",$0,0.00%
Revenue Changes,General Fund Revenue,"27,194,047",“Surpluses and Balances - Fund Balance”,"-12,800,238",,0,,0,,0,,0,,0,,0,,0,,0,,0,"$14,393,809","-$12,800,238",-47.07%
Revenue Changes,General Fund Revenue,"60,899,463",“Tax Levy”,"-2,513,138",,0,,0,,0,,0,,0,,0,,0,,0,,0,"$58,386,325","-$2,513,138",-4.13%
Revenue Changes,General Fund Revenue,"608,995",“1% Added Pursuant to Law”,"-25,131",,0,,0,,0,,0,,0,,0,,0,,0,,0,"$583,864","-$25,131",-4.13%
Syracuse School City District,Syracuse School City District,"612,456,627",Miscellaneous Revenue,"-1,455,000",Technical Adjustment - Salaries and Benefits,"1,422,179",Technical Adjustment - Supplies and Equipment,"-303,569",Technical Adjustment - Professional Services,406390,Technical Adjustment — Interfund and All Other Expenses,-3000000,,0,,0,,0,,0,,0,"$609,526,627","-$2,930,000",-0.48%`

      // Helper functions for data parsing
        function cleanNumber(str) {
            if (!str) return 0;
            if (typeof str === 'number') return str;
            return parseFloat(str.replace(/[$,\s%]/g, ''));
        }

        // Parse the CSV data
        const parsedData = [];
        rawData.split('\n').forEach((row, index) => {
            if (index === 0) return; // Skip header
            
            const cells = [];
            let currentCell = '';
            let insideQuotes = false;
            
            // Parse CSV considering quoted commas
            for (let i = 0; i < row.length; i++) {
                if (row[i] === '"') {
                    insideQuotes = !insideQuotes;
                } else if (row[i] === ',' && !insideQuotes) {
                    cells.push(currentCell.trim());
                    currentCell = '';
                } else {
                    currentCell += row[i];
                }
            }
            cells.push(currentCell.trim());
            
            // Fix any missing values and calculate if needed
            const proposedBudget = cleanNumber(cells[1]);
            const amendedBudget = cleanNumber(cells[10]);
            let percentCut = cells[11] ? cleanNumber(cells[11]) : ((amendedBudget - proposedBudget) / proposedBudget * 100);
            
            // Some entries have #VALUE! for percent cut, recalculate those
            if (isNaN(percentCut)) {
                percentCut = ((amendedBudget - proposedBudget) / proposedBudget * 100);
            }
            
            const item = {
                department: cells[0].replace(/"/g, ''),
                proposedBudget: proposedBudget,
                amendedBudget: amendedBudget,
                absoluteCut: proposedBudget - amendedBudget,
                percentCut: percentCut,
                account1: cells[2],
                amtChanged1: cleanNumber(cells[3]),
                account2: cells[4],
                amtChanged2: cleanNumber(cells[5]),
                account3: cells[6],
                amtChanged3: cleanNumber(cells[7])
            };
            
            parsedData.push(item);
        });

        // Create tooltip
        const tooltip = d3.select("body")
            .append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

        // Create a color scale for departments
        const colorScale = d3.scaleOrdinal()
            .domain(parsedData.map(d => d.department))
            .range(d3.schemeCategory10);

        // Chart 1: Percent Cut by Department
        function createPercentCutChart() {
            const sortedData = [...parsedData].sort((a, b) => b.percentCut - a.percentCut);
            
            const margin = {top: 30, right: 20, bottom: 120, left: 60};
            const width = Math.min(800, window.innerWidth - 40) - margin.left - margin.right;
            const height = 500 - margin.top - margin.bottom;
            
            const svg = d3.select("#percent-cut-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Create scales
            const x = d3.scaleBand()
                .domain(sortedData.map(d => d.department))
                .range([0, width])
                .padding(0.2);
            
            const y = d3.scaleLinear()
                .domain([0, d3.max(sortedData, d => Math.abs(d.percentCut)) * 1.1])
                .range([height, 0]);
            
            // Create axes
            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x))
                .selectAll("text")
                .attr("transform", "rotate(-45)")
                .style("text-anchor", "end")
                .attr("dx", "-.8em")
                .attr("dy", ".15em");
            
            svg.append("g")
                .call(d3.axisLeft(y).tickFormat(d => `${d}%`));
            
            // Create bars
            const bars = svg.selectAll(".bar")
                .data(sortedData)
                .enter()
                .append("rect")
                .attr("class", "bar")
                .attr("x", d => x(d.department))
                .attr("width", x.bandwidth())
                .attr("y", height)
                .attr("height", 0)
                .attr("fill", (d, i) => {
                    // Color gradient based on severity of cuts
                    if (d.percentCut > 30) return "#c0392b";
                    if (d.percentCut > 15) return "#e74c3c";
                    if (d.percentCut > 10) return "#f39c12";
                    if (d.percentCut > 5) return "#f1c40f";
                    return "#27ae60";
                });
            
            // Animation
            bars.transition()
                .duration(1000)
                .delay((d, i) => i * 50)
                .attr("y", d => y(Math.abs(d.percentCut)))
                .attr("height", d => height - y(Math.abs(d.percentCut)));
            
            // Add labels
            svg.selectAll(".label")
                .data(sortedData)
                .enter()
                .append("text")
                .attr("class", "label")
                .attr("x", d => x(d.department) + x.bandwidth() / 2)
                .attr("y", d => y(Math.abs(d.percentCut)) - 5)
                .attr("text-anchor", "middle")
                .style("font-size", "11px")
                .style("opacity", 0)
                .text(d => `${Math.abs(d.percentCut).toFixed(1)}%`)
                .transition()
                .duration(1000)
                .delay((d, i) => 1000 + i * 50)
                .style("opacity", 1);
            
            // Add tooltip functionality
            bars.on("mouseover", function(event, d) {
                d3.select(this).transition()
                    .duration(200)
                    .attr("opacity", 0.8);
                
                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);
                
                tooltip.html(`
                    <strong>${d.department}</strong><br>
                    Proposed Budget: $${d3.format(",")(Math.round(d.proposedBudget))}<br>
                    Amended Budget: $${d3.format(",")(Math.round(d.amendedBudget))}<br>
                    Cut: ${Math.abs(d.percentCut).toFixed(2)}% ($${d3.format(",")(Math.round(d.absoluteCut))})
                `)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function() {
                d3.select(this).transition()
                    .duration(500)
                    .attr("opacity", 1);
                
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            });
            
            // Add title
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", -10)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("font-weight", "bold")
                .text("Budget Cut Percentages by Department");
            
            // Add y-axis label
            svg.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", -margin.left + 15)
                .attr("x", -height / 2)
                .attr("text-anchor", "middle")
                .text("Percentage Cut");
        }
        
        // Chart 2: Absolute Cut Values
        function createAbsoluteCutChart() {
            const sortedData = [...parsedData].sort((a, b) => b.absoluteCut - a.absoluteCut).slice(0, 15);
            
            const margin = {top: 30, right: 20, bottom: 120, left: 80};
            const width = Math.min(800, window.innerWidth - 40) - margin.left - margin.right;
            const height = 500 - margin.top - margin.bottom;
            
            const svg = d3.select("#absolute-cut-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Create scales
            const x = d3.scaleBand()
                .domain(sortedData.map(d => d.department))
                .range([0, width])
                .padding(0.2);
            
            const y = d3.scaleLinear()
                .domain([0, d3.max(sortedData, d => d.absoluteCut) * 1.1])
                .range([height, 0]);
            
            // Create axes
            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x))
                .selectAll("text")
                .attr("transform", "rotate(-45)")
                .style("text-anchor", "end")
                .attr("dx", "-.8em")
                .attr("dy", ".15em");
            
            svg.append("g")
                .call(d3.axisLeft(y).tickFormat(d => `$${d3.format(",")(d)}`));
            
            // Create bars with gradient fill
            const bars = svg.selectAll(".bar")
                .data(sortedData)
                .enter()
                .append("rect")
                .attr("class", "bar")
                .attr("x", d => x(d.department))
                .attr("width", x.bandwidth())
                .attr("y", height)
                .attr("height", 0)
                .attr("fill", (d, i) => {
                    // Color indicating severity in absolute dollars
                    if (d.absoluteCut > 500000) return "#c0392b";
                    if (d.absoluteCut > 250000) return "#e74c3c";
                    if (d.absoluteCut > 100000) return "#f39c12";
                    if (d.absoluteCut > 50000) return "#f1c40f";
                    return "#27ae60";
                });
            
            // Animation
            bars.transition()
                .duration(1000)
                .delay((d, i) => i * 50)
                .attr("y", d => y(d.absoluteCut))
                .attr("height", d => height - y(d.absoluteCut));
            
            // Add labels
            svg.selectAll(".label")
                .data(sortedData)
                .enter()
                .append("text")
                .attr("class", "label")
                .attr("x", d => x(d.department) + x.bandwidth() / 2)
                .attr("y", d => y(d.absoluteCut) - 5)
                .attr("text-anchor", "middle")
                .style("font-size", "11px")
                .style("opacity", 0)
                .text(d => `$${d3.format(".2s")(d.absoluteCut)}`)
                .transition()
                .duration(1000)
                .delay((d, i) => 1000 + i * 50)
                .style("opacity", 1);
            
            // Add tooltip functionality
            bars.on("mouseover", function(event, d) {
                d3.select(this).transition()
                    .duration(200)
                    .attr("opacity", 0.8);
                
                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);
                
                tooltip.html(`
                    <strong>${d.department}</strong><br>
                    Total Cut: $${d3.format(",")(Math.round(d.absoluteCut))}<br>
                    Percentage: ${Math.abs(d.percentCut).toFixed(2)}%<br>
                    Original Budget: $${d3.format(",")(Math.round(d.proposedBudget))}
                `)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function() {
                d3.select(this).transition()
                    .duration(500)
                    .attr("opacity", 1);
                
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            });
            
            // Add title
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", -10)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("font-weight", "bold")
                .text("Top 15 Departments by Dollar Amount of Cuts");
            
            // Add y-axis label
            svg.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", -margin.left + 15)
                .attr("x", -height / 2)
                .attr("text-anchor", "middle")
                .text("Dollar Amount Cut");
        }
        
        // Chart 3: Before vs After Budget
        function createBeforeAfterChart() {
            let sortedData = [...parsedData].sort((a, b) => b.proposedBudget - a.proposedBudget);
            
            const margin = {top: 30, right: 120, bottom: 120, left: 80};
            const width = Math.min(800, window.innerWidth - 40) - margin.left - margin.right;
            const height = 600 - margin.top - margin.bottom;
            
            const svg = d3.select("#before-after-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Create scales
            const y = d3.scaleBand()
                .domain(sortedData.map(d => d.department))
                .range([0, height])
                .padding(0.2);
            
            const x = d3.scaleLinear()
                .domain([0, d3.max(sortedData, d => d.proposedBudget) * 1.1])
                .range([0, width]);
            
            // Create axes
            svg.append("g")
                .call(d3.axisLeft(y));
            
            svg.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x).tickFormat(d => `$${d3.format(".2s")(d)}`));
            
            // Create grouped bars for before/after
            const beforeBars = svg.selectAll(".before-bar")
                .data(sortedData)
                .enter()
                .append("rect")
                .attr("class", "before-bar")
                .attr("y", d => y(d.department))
                .attr("height", y.bandwidth())
                .attr("x", 0)
                .attr("width", 0)
                .attr("fill", "#3498db")
                .attr("opacity", 0.8);
            
            const afterBars = svg.selectAll(".after-bar")
                .data(sortedData)
                .enter()
                .append("rect")
                .attr("class", "after-bar")
                .attr("y", d => y(d.department) + y.bandwidth() / 4)
                .attr("height", y.bandwidth() / 2)
                .attr("x", 0)
                .attr("width", 0)
                .attr("fill", "#e74c3c");
            
            // Animation
            beforeBars.transition()
                .duration(1000)
                .delay((d, i) => i * 30)
                .attr("width", d => x(d.proposedBudget));
            
            afterBars.transition()
                .duration(1000)
                .delay((d, i) => i * 30 + 500)
                .attr("width", d => x(d.amendedBudget));
            
            // Add legend
            const legend = svg.append("g")
                .attr("class", "legend")
                .attr("transform", `translate(${width + 10}, 0)`);
            
            legend.append("rect")
                .attr("x", 0)
                .attr("y", 0)
                .attr("width", 18)
                .attr("height", 18)
                .attr("fill", "#3498db");
            
            legend.append("text")
                .attr("x", 24)
                .attr("y", 9)
                .attr("dy", ".35em")
                .text("Proposed Budget");
            
            legend.append("rect")
                .attr("x", 0)
                .attr("y", 24)
                .attr("width", 18)
                .attr("height", 18)
                .attr("fill", "#e74c3c");
            
            legend.append("text")
                .attr("x", 24)
                .attr("y", 33)
                .attr("dy", ".35em")
                .text("Amended Budget");
            
            // Add tooltip functionality
            beforeBars.on("mouseover", function(event, d) {
                d3.select(this).transition()
                    .duration(200)
                    .attr("opacity", 1);
                
                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);
                
                tooltip.html(`
                    <strong>${d.department}</strong><br>
                    Proposed Budget: ${d3.format(",")(Math.round(d.proposedBudget))}<br>
                    Cut Amount: ${d3.format(",")(Math.round(d.absoluteCut))}<br>
                    Cut Percentage: ${Math.abs(d.percentCut).toFixed(2)}%
                `)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function() {
                d3.select(this).transition()
                    .duration(500)
                    .attr("opacity", 0.8);
                
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            });
            
            afterBars.on("mouseover", function(event, d) {
                d3.select(this).transition()
                    .duration(200)
                    .attr("opacity", 0.8);
                
                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);
                
                tooltip.html(`
                    <strong>${d.department}</strong><br>
                    Amended Budget: ${d3.format(",")(Math.round(d.amendedBudget))}<br>
                    Cut Amount: ${d3.format(",")(Math.round(d.absoluteCut))}<br>
                    Cut Percentage: ${Math.abs(d.percentCut).toFixed(2)}%
                `)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function() {
                d3.select(this).transition()
                    .duration(500)
                    .attr("opacity", 1);
                
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            });
            
            // Add title
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", -10)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("font-weight", "bold")
                .text("Proposed vs. Amended Budget by Department");
            
            // Add x-axis label
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", height + 40)
                .attr("text-anchor", "middle")
                .text("Budget Amount ($)");
            
            // Add sorting functionality
            d3.select("#sort-budget-btn").on("click", function() {
                sortedData = [...parsedData].sort((a, b) => b.proposedBudget - a.proposedBudget);
                updateChart();
            });
            
            d3.select("#sort-cut-btn").on("click", function() {
                sortedData = [...parsedData].sort((a, b) => b.percentCut - a.percentCut);
                updateChart();
            });
            
            function updateChart() {
                // Update y domain
                y.domain(sortedData.map(d => d.department));
                
                // Update y-axis with transition
                svg.select(".y-axis")
                    .transition()
                    .duration(750)
                    .call(d3.axisLeft(y));
                
                // Update bars
                beforeBars.data(sortedData)
                    .transition()
                    .duration(750)
                    .attr("y", d => y(d.department))
                    .attr("width", d => x(d.proposedBudget));
                
                afterBars.data(sortedData)
                    .transition()
                    .duration(750)
                    .attr("y", d => y(d.department) + y.bandwidth() / 4)
                    .attr("width", d => x(d.amendedBudget));
            }
            
            // Create y-axis with class for updates
            svg.append("g")
                .attr("class", "y-axis")
                .call(d3.axisLeft(y));
        }
        
        // Chart 4: Cut Types Analysis
        function createCutTypesChart() {
            // Analyze cuts by category
            const categoryMap = new Map();
            
            // Process all account amendments to categorize cuts
            parsedData.forEach(dept => {
                // Process account 1
                if (dept.account1) {
                    const accountType = extractAccountType(dept.account1);
                    if (categoryMap.has(accountType)) {
                        categoryMap.set(accountType, categoryMap.get(accountType) + Math.abs(dept.amtChanged1));
                    } else {
                        categoryMap.set(accountType, Math.abs(dept.amtChanged1));
                    }
                }
                
                // Process account 2
                if (dept.account2 && dept.amtChanged2 !== 0) {
                    const accountType = extractAccountType(dept.account2);
                    if (categoryMap.has(accountType)) {
                        categoryMap.set(accountType, categoryMap.get(accountType) + Math.abs(dept.amtChanged2));
                    } else {
                        categoryMap.set(accountType, Math.abs(dept.amtChanged2));
                    }
                }
                
                // Process account 3
                if (dept.account3 && dept.amtChanged3 !== 0) {
                    const accountType = extractAccountType(dept.account3);
                    if (categoryMap.has(accountType)) {
                        categoryMap.set(accountType, categoryMap.get(accountType) + Math.abs(dept.amtChanged3));
                    } else {
                        categoryMap.set(accountType, Math.abs(dept.amtChanged3));
                    }
                }
            });
            
            // Convert map to array for D3
            const cutTypeData = Array.from(categoryMap, ([key, value]) => ({ 
                category: key, 
                amount: value 
            })).sort((a, b) => b.amount - a.amount);
            
            // Define dimensions for pie chart
            const width = Math.min(500, window.innerWidth - 40);
            const height = 400;
            const radius = Math.min(width, height) / 2;
            
            // Create SVG
            const svg = d3.select("#cut-types-chart")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", `translate(${width / 2},${height / 2})`);
            
            // Create color scale
            const color = d3.scaleOrdinal()
                .domain(cutTypeData.map(d => d.category))
                .range(["#2c3e50", "#3498db", "#9b59b6", "#e74c3c", "#f1c40f", "#16a085", "#2ecc71", "#e67e22", "#1abc9c", "#95a5a6"]);
            
            // Create pie chart
            const pie = d3.pie()
                .value(d => d.amount)
                .sort(null);
            
            const data_ready = pie(cutTypeData);
            
            // Create arc generator
            const arc = d3.arc()
                .innerRadius(radius * 0.4)
                .outerRadius(radius * 0.8);
            
            const outerArc = d3.arc()
                .innerRadius(radius * 0.9)
                .outerRadius(radius * 0.9);
            
            // Build the pie chart with animation
            const slices = svg.selectAll('path')
                .data(data_ready)
                .enter()
                .append('path')
                .attr('d', arc)
                .attr('fill', d => color(d.data.category))
                .attr("stroke", "white")
                .style("stroke-width", "2px")
                .style("opacity", 0.7)
                .on("mouseover", function(event, d) {
                    d3.select(this)
                        .style("opacity", 1);
                    
                    tooltip.transition()
                        .duration(200)
                        .style("opacity", .9);
                    
                    const percentage = (d.data.amount / d3.sum(cutTypeData, d => d.amount) * 100).toFixed(1);
                    
                    tooltip.html(`
                        <strong>${d.data.category}</strong><br>
                        Amount: ${d3.format(",")(Math.round(d.data.amount))}<br>
                        Percentage: ${percentage}% of total cuts
                    `)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function() {
                    d3.select(this)
                        .style("opacity", 0.7);
                    
                    tooltip.transition()
                        .duration(500)
                        .style("opacity", 0);
                });
            
            // Animation
            slices
                .transition()
                .duration(1000)
                .attrTween('d', function(d) {
                    const i = d3.interpolate({startAngle: 0, endAngle: 0}, d);
                    return function(t) { return arc(i(t)); };
                });
            
            // Add polylines for labels
            const polylines = svg.selectAll('polyline')
                .data(data_ready)
                .enter()
                .append('polyline')
                .style("fill", "none")
                .style("stroke", "black")
                .style("opacity", 0.3)
                .style("stroke-width", "1px")
                .attr('points', function(d) {
                    const pos = outerArc.centroid(d);
                    pos[0] = radius * 0.95 * (midAngle(d) < Math.PI ? 1 : -1);
                    return [arc.centroid(d), outerArc.centroid(d), pos];
                });
            
            // Add labels with animation
            const labels = svg.selectAll('text')
                .data(data_ready)
                .enter()
                .append('text')
                .style("opacity", 0)
                .text(d => {
                    const percentage = (d.data.amount / d3.sum(cutTypeData, d => d.amount) * 100).toFixed(1);
                    return `${d.data.category} (${percentage}%)`;
                })
                .attr('transform', function(d) {
                    const pos = outerArc.centroid(d);
                    pos[0] = radius * 0.99 * (midAngle(d) < Math.PI ? 1 : -1);
                    return `translate(${pos})`;
                })
                .style('text-anchor', function(d) {
                    return midAngle(d) < Math.PI ? 'start' : 'end';
                })
                .style("font-size", "12px");
            
            labels.transition()
                .delay(1000)
                .duration(500)
                .style("opacity", function(d) {
                    // Only show labels for larger slices to avoid overlap
                    const percentage = d.data.amount / d3.sum(cutTypeData, d => d.amount) * 100;
                    return percentage > 5 ? 1 : 0;
                });
            
            // Add title
            svg.append("text")
                .attr("x", 0)
                .attr("y", -height / 2 + 20)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("font-weight", "bold")
                .text("Distribution of Budget Cuts by Category");
            
            // Helper function for middle angle
            function midAngle(d) {
                return d.startAngle + (d.endAngle - d.startAngle) / 2;
            }
            
            // Helper function to extract account type from account string
            function extractAccountType(accountStr) {
                if (!accountStr) return "Other";
                
                accountStr = accountStr.toString();
                
                if (accountStr.includes("Professional Services")) {
                    return "Professional Services";
                } else if (accountStr.includes("Salaries") || accountStr.includes("Wages")) {
                    return "Salaries & Wages";
                } else if (accountStr.includes("Temporary Services") || accountStr.includes("Overtime")) {
                    return "Temporary & Overtime";
                } else if (accountStr.includes("Contracted Services")) {
                    return "Contracted Services";
                } else if (accountStr.includes("Office Supplies") || accountStr.includes("Supplies & Materials")) {
                    return "Supplies & Materials";
                } else if (accountStr.includes("Travel")) {
                    return "Travel";
                } else if (accountStr.includes("Training") || accountStr.includes("Development")) {
                    return "Training & Development";
                } else if (accountStr.includes("Other Services")) {
                    return "Other Services";
                } else if (accountStr.includes("Technical") || accountStr.includes("Tools")) {
                    return "Technical Equipment";
                } else if (accountStr.includes("Factual & Informational")) {
                    return "Information Services";
                } else {
                    return "Other";
                }
            }
        }
        
        // Execute all chart creation functions
        window.addEventListener('load', function() {
            createPercentCutChart();
            createAbsoluteCutChart();
            createBeforeAfterChart();
            createCutTypesChart();
        });
    </script>
</body>
</html>